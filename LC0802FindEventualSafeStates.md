#### 概念

有向图，找环。

#### 终端节点

如果一个节点没有连出的有向边，则该节点是 **终端节点**

#### 安全节点

所有从该节点出发的路径都通往**终端节点**。

- 环上的节点不是**安全节点**
- 有通往环的路径的节点不是**安全节点**

#### DFS 和 拓扑排序 两种方法

DFS：如果某一个 dfs 调用栈检测出环，那么调用栈中所有节点都不是安全节点

拓扑排序 Kahn 算法：

- 反转图的边来创建一个具有反向边的新图
- 如果一个节点的所有入边都来自先前识别的安全节点，那么这个节点就是安全节点
- 如果删除从安全节点出发的边，并发现一个没有入边的节点，它就是一个新的安全节点
- 在反向图中，从循环中的节点有出边的节点永远不会被访问，因此永远不会被标记为安全的。从这些不安全节点有出边的节点也永远不会被访问
- 如果有循环，由于循环依赖，循环中节点的入度无法设置为0